<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plunder, A Pirate's Life</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pirata+One&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom font for a clean look, with a pirate-themed header font */
        body {
            font-family: "Inter", sans-serif;
            background: linear-gradient(to bottom right, #1a2a3a, #0a1a2a); /* Deep ocean gradient */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Full viewport height */
            margin: 0;
            padding: 1rem; /* Padding around the content */
            box-sizing: border-box; /* Include padding in element's total width and height */
        }
        .container {
            background-color: #d4b88c; /* Aged parchment/wood color */
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); /* Deeper shadow for depth */
            padding: 1.5rem; /* Adjusted padding for mobile */
            text-align: center;
            max-width: 90%; /* Max width for responsiveness */
            width: 550px; /* Fixed width for larger screens */
            display: flex;
            flex-direction: column;
            gap: 1.5rem; /* Space between elements */
            border: 5px solid #8b4513; /* Dark wood border */
            position: relative; /* For potential future decorative elements */
        }
        @media (min-width: 640px) { /* Medium screens and up */
            .container {
                padding: 2.5rem; /* Restore larger padding for desktop */
            }
        }
        .container::before {
            content: '';
            position: absolute;
            top: -5px; left: -5px; right: -5px; bottom: -5px;
            border: 5px dashed rgba(139, 69, 19, 0.5); /* Dashed inner border for map feel */
            border-radius: 1.5rem;
            pointer-events: none; /* Allow clicks to pass through */
        }

        h1 {
            font-family: 'Pirata One', cursive; /* Pirate-themed font for the main title */
            font-size: 2.8rem; /* Smaller for mobile */
            color: #4e342e; /* Dark brown for title */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); /* Text shadow for depth */
            margin-bottom: 1.5rem;
            line-height: 1.1; /* Adjust line height for multi-line title */
        }
        @media (min-width: 640px) { /* Medium screens and up */
            h1 {
                font-size: 3.5rem; /* Restore larger font for desktop */
            }
        }

        .display-section {
            background-color: #fdf6e3; /* Lighter parchment for display boxes */
            border-radius: 0.75rem; /* Rounded corners for display */
            padding: 1.25rem; /* Generous padding */
            font-weight: 700; /* Bold font */
            color: #333333; /* Dark text color */
            min-height: 4rem; /* Ensure consistent height */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap; /* Allow content to wrap on small screens */
            gap: 1rem; /* Space between items if they wrap */
            flex-direction: column; /* Stack title and content */
            border: 2px solid #8b4513; /* Matching border */
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1); /* Inner shadow for depth */
        }
        .display-title {
            font-size: 1.5rem; /* Slightly larger title for sections */
            color: #5a403a; /* Darker brown */
            margin-bottom: 0.5rem;
            font-family: 'Pirata One', cursive; /* Apply pirate font to section titles too */
        }

        /* Compass specific styles */
        .compass-display-content {
            display: flex;
            gap: 1rem; /* Reduced gap for mobile */
            justify-content: center;
            align-items: center;
            width: 100%; /* Ensure it takes full width */
        }
        @media (min-width: 640px) { /* Medium screens and up */
            .compass-display-content {
                gap: 2rem; /* Restore larger gap for desktop */
            }
        }
        .compass-container {
            width: 120px; /* Fixed size for the compass */
            height: 120px;
            border-radius: 50%;
            background-color: #5a403a; /* Dark wood/brass color */
            border: 5px solid #b8860b; /* Gold rim */
            overflow: hidden; /* Hide parts of the spinning dial */
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.2); /* Outer shadow + inner glass effect */
        }
        .compass-container::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5); /* Inner shadow for depth */
            pointer-events: none;
        }
        .compass-container::after { /* Compass Needle/Indicator */
            content: '';
            position: absolute;
            top: 0; /* Position at the top edge */
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 15px solid #ff4500; /* Red triangle for needle */
            z-index: 10; /* Ensure it's above the dial */
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5)); /* Shadow for needle */
        }

        .compass-dial {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3.5rem; /* Large font for the value */
            color: #ffd700; /* Gold color for the value */
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            transition: transform 0.5s ease-out; /* Smooth transition for final snap */
            user-select: none; /* Prevent text selection during spin */
        }

        /* Animation for spinning compass */
        @keyframes spinCompass {
            from { transform: rotate(0deg); }
            to { transform: rotate(3600deg); /* Spin multiple times */ }
        }
        .compass-dial.spinning {
            animation: spinCompass 1.5s linear infinite; /* Continuous spin during animation, faster */
        }

        .button-group {
            display: flex;
            flex-direction: column; /* Stack buttons on small screens */
            gap: 1rem; /* Space between buttons */
        }
        @media (min-width: 640px) { /* On small screens and up, make buttons a row */
            .button-group {
                flex-direction: row;
            }
        }

        .generate-button {
            flex: 1; /* Allow buttons to grow and take equal space */
            background-image: linear-gradient(to right, #4e342e, #6d4c41); /* Dark wood gradient */
            color: #ffd700; /* Gold text */
            padding: 1.2rem 2.5rem; /* More comfortable padding */
            border-radius: 1rem; /* Rounded button */
            font-size: 1.35rem; /* Larger font */
            font-weight: 600; /* Semi-bold */
            cursor: pointer;
            border: 3px solid #b8860b; /* Gold border */
            transition: all 0.3s ease; /* Smooth transition for hover effects */
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3); /* Deeper shadow */
            white-space: nowrap; /* Prevent button text from wrapping */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); /* Text shadow for gold effect */
        }
        .generate-button:hover {
            transform: translateY(-4px); /* Lift effect on hover */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4); /* Enhanced shadow */
            background-image: linear-gradient(to right, #6d4c41, #8d6e63); /* Lighter wood on hover */
        }
        .generate-button:active {
            transform: translateY(0); /* Press effect */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* Styles for the new selector */
        .selector-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .selector-group label {
            font-family: 'Pirata One', cursive;
            font-size: 1.4rem;
            color: #5a403a;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            text-align: center; /* Center label text */
        }
        .selector-group select {
            background-color: #fdf6e3;
            border: 2px solid #8b4513;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 1.1rem;
            color: #333333;
            cursor: pointer;
            outline: none;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
            appearance: none; /* Remove default dropdown arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238b4513'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E"); /* Custom arrow */
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1.5em;
            padding-right: 2.5rem; /* Make space for custom arrow */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center">Plunder, A Pirate's Life</h1>

        <!-- Game Count Selector -->
        <div class="selector-group">
            <label for="gameCountSelector">How many games are ye playin' with, matey?</label>
            <select id="gameCountSelector">
                <option value="1">1 Game</option>
                <option value="2">2 Games</option>
                <option value="3">3 Games</option>
                <option value="4">4 Games</option>
            </select>
        </div>

        <!-- Spin Dial Coordinates Section -->
        <div class="display-section">
            <div class="display-title">Spin Dial</div>
            <div id="coordinateDisplay" class="compass-display-content">
                <div class="compass-container">
                    <div id="letterDial" class="compass-dial">A</div>
                </div>
                <div class="compass-container">
                    <div id="numberDial" class="compass-dial">1</div>
                </div>
            </div>
        </div>

        <!-- Buttons Group -->
        <div class="button-group">
            <button id="spinDialButton" class="generate-button">Spin Dial</button>
        </div>
    </div>

    <script>
        // Get references to HTML elements
        const gameCountSelector = document.getElementById('gameCountSelector');
        const spinDialButton = document.getElementById('spinDialButton');
        const letterDial = document.getElementById('letterDial');
        const numberDial = document.getElementById('numberDial');

        // Function to generate the full alphabet sequence (A, B, ..., Z, AA, AB, ...)
        function generateFullAlphabetSequence(count) {
            const alphabet = [];
            let current = 0;
            while (alphabet.length < count) {
                let letter = '';
                let num = current;
                do {
                    letter = String.fromCharCode(65 + (num % 26)) + letter;
                    num = Math.floor(num / 26) - 1; // Adjust for 0-indexed vs 1-indexed for base 26
                } while (num >= 0);
                alphabet.push(letter);
                current++;
            }
            return alphabet;
        }

        // Pre-generate the maximum possible alphabet needed (for 4 games: 12 + 3*12 = 48 letters)
        const fullAlphabet = generateFullAlphabetSequence(48);

        // Variables to store current max letters and numbers based on selector
        let currentMaxLetters = 0;
        let currentMaxNumbers = 0;

        let letterSpinInterval; // Variable for letter compass animation
        let numberSpinInterval; // Variable for number compass animation

        /**
         * Updates the current max letters and numbers based on the selected game count.
         */
        function updateGridRanges() {
            const games = parseInt(gameCountSelector.value);
            currentMaxLetters = 12 + (games - 1) * 12;
            currentMaxNumbers = 18 + (games - 1) * 18;
        }

        /**
         * Generates a single random grid coordinate (e.g., "A-1", "M-18")
         * based on the current `currentMaxLetters` and `currentMaxNumbers`.
         * @returns {string} A random grid coordinate.
         */
        function generateRandomCoordinate() {
            const availableLetters = fullAlphabet.slice(0, currentMaxLetters);
            const randomLetterIndex = Math.floor(Math.random() * availableLetters.length);
            const randomLetter = availableLetters[randomLetterIndex];
            const randomNumber = Math.floor(Math.random() * currentMaxNumbers) + 1;
            return `${randomLetter}-${randomNumber}`;
        }

        /**
         * Event handler for the "Spin Dial" button click.
         * Initiates a spinning animation for two compasses, then displays the final single coordinate.
         */
        function handleSpinDialClick() {
            // Disable the button during the animation
            spinDialButton.disabled = true;
            spinDialButton.textContent = 'Spinning...';

            // Add spinning class to both dials to trigger CSS animation
            letterDial.classList.add('spinning');
            numberDial.classList.add('spinning');

            // Start rapid random display for letter dial (faster)
            letterSpinInterval = setInterval(() => {
                const availableLetters = fullAlphabet.slice(0, currentMaxLetters);
                letterDial.textContent = availableLetters[Math.floor(Math.random() * availableLetters.length)];
            }, 30); // Updated to 30ms for faster spin

            // Start rapid random display for number dial (faster)
            numberSpinInterval = setInterval(() => {
                numberDial.textContent = Math.floor(Math.random() * currentMaxNumbers) + 1;
            }, 30); // Updated to 30ms for faster spin

            // Determine the final coordinate
            const finalCoord = generateRandomCoordinate();
            const [finalLetter, finalNumber] = finalCoord.split('-');

            // Stop spinning and display final results after a delay
            setTimeout(() => {
                clearInterval(letterSpinInterval); // Stop letter animation
                clearInterval(numberSpinInterval); // Stop number animation

                letterDial.classList.remove('spinning'); // Remove animation class
                numberDial.classList.remove('spinning'); // Remove animation class

                // Set final values
                letterDial.textContent = finalLetter;
                numberDial.textContent = finalNumber;

                // Re-enable the button
                spinDialButton.disabled = false;
                spinDialButton.textContent = 'Spin Dial';
            }, 2000); // Spin for 2 seconds (adjusted slightly for faster spin)
        }

        // Add event listener for the Spin Dial button
        spinDialButton.addEventListener('click', handleSpinDialClick);

        // Add event listener for the game count selector
        gameCountSelector.addEventListener('change', updateGridRanges);

        // Initial setup when the page loads
        window.onload = function() {
            updateGridRanges(); // Set initial ranges based on default selector value
            letterDial.textContent = 'A'; // Set initial values for compasses
            numberDial.textContent = '1';
        };
    </script>
</body>
</html>

